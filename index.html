<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T - metry</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="container">
        <div id="header">
            <h1 class="app-title">
                T-metry
                    <span class="info-icon" onclick="showInstructionInfo()">i</span>
            </h1>
            <p class="app-subtitle">Advanced 3D Taper Analysis & Measurement Tool</p>
            
            <!-- Progress Steps -->
            <div class="progress-steps">
                <div class="step active" id="step1Indicator">
                    <div class="step-number">1</div>
                    <div class="step-label">Load & Measure</div>
                </div>
                <div class="step" id="step2Indicator">
                    <div class="step-number">2</div>
                    <div class="step-label">Calculate Tapers</div>
                </div>
                <div class="step" id="step3Indicator">
                    <div class="step-number">3</div>
                    <div class="step-label">Analysis & Results</div>
                </div>
            </div>
            
            <div id="controls">
                <label class="file-label">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                    </svg>
                    Load STL
                    <input type="file" id="fileInput" accept=".stl">
                </label>
                
                <div class="control-section" id="angleControls" style="display: none;">
                    <div>
                        <div class="control-section-title">
                            Angle Measurements 
                            <span class="info-icon" onclick="showAngleInfo()">i</span>
                        </div>
                        <div class="control-group">
                            <button id="angle1Btn" disabled>
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
                                </svg>
                                Angle 1
                            </button>
                            <button id="angle2Btn" disabled>
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
                                </svg>
                                Angle 2
                            </button>
                            <button id="angle3Btn" disabled>
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
                                </svg>
                                Angle 3
                            </button>
                            <button id="angle4Btn" disabled>
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
                                </svg>
                                Angle 4
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="control-section" id="distanceControls" style="display: none;">
                    <div>
                        <div class="control-section-title">
                            Distance Measurements
                            <span class="info-icon" onclick="showDistanceInfo()">i</span>
                        </div>
                        <div class="control-group">
                            <button id="b1Btn" disabled>
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                                </svg>
                                B1 Width
                            </button>
                            <button id="b2Btn" disabled>
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                                </svg>
                                B2 Width
                            </button>
                            <button id="cHeightBtn" disabled>
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                                </svg>
                                C Height
                            </button>
                        </div>
                    </div>
                </div>
                
                <select id="unitSelect">
                    <option value="mm">mm</option>
                    <option value="cm">cm</option>
                    <option value="m">m</option>
                    <option value="in">inches</option>
                </select>
                
                <button id="clearBtn" class="clear" disabled>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6"/>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                    </svg>
                    Clear All
                </button>
            </div>
            <div id="info"></div>
            <div id="status"></div>
        </div>

        <div id="main">
            <div id="canvasContainer">
                <canvas id="canvas"></canvas>
                <div id="placeholder">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                    </svg>
                    <p style="font-size: 20px; margin-bottom: 10px;">Upload an STL file to begin</p>
                    <p style="font-size: 14px;">Drag to rotate â€¢ Scroll to zoom</p>
                </div>
            </div>

            <div id="sidebar">
                <h2>Measurements</h2>
                <div id="measurements">
                    <p class="no-measurements">No measurements yet</p>
                </div>
            </div>
        </div>

        <button id="toggleViewBtn" title="Toggle 3D View">
            <svg id="toggleIcon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 15l-6-6-6 6"/>
            </svg>
        </button>
    </div>

    <script src="script.js"></script>
</body>
</html>